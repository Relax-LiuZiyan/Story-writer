---
title: 网络技术常用函数
tags: MAC,IPV4
renderNumberedHeading: true
grammar_cjkRuby: true
---



# MAC地址打印

``` c
#define MAC_FMT "%02x:%02x:%02x:%02x:%02x:%02x"
#define MAC_ARG(x) ((uint8_t*)(x))[0],((uint8_t*)(x))[1],((uint8_t*)(x))[2],((uint8_t*)(x))[3],((uint8_t*)(x))[4],((uint8_t*)(x))[5]

//使用样例如下：
printf("src_mac:" MAC_FMT "\n", MAC_ARG(gLocalMac));
printf("dst_mac:" MAC_FMT "\n", MAC_ARG(arphdr->arp_data.arp_sha.addr_bytes));
printk(KERN_INFO "SOURCE:" MAC_FMT "\n", MAC_ARG(gLocalMac));
printk(KERN_INFO "DEST:" MAC_FMT "\n", MAC_ARG(arphdr->arp_data.arp_sha.addr_bytes));
```
# IPV4地址转换
## 点分十进制IPV4地址定义

``` c
#define MAKE_IPV4_ADDR(a, b, c, d) (a + (b<<8) + (c<<16) + (d<<24))
static uint32_t gLocalIp = MAKE_IPV4_ADDR(192, 168, 0, 8);
```

## 打印点分十进制IPV4地址

#include <arpa/inet.h>
	struct in_addr addr;
	addr.s_addr = iphdr->src_addr;
	printf("src: %s:%d, ", inet_ntoa(addr), ntohs(udphdr->src_port));
	addr.s_addr = iphdr->dst_addr;
	printf("dst: %s:%d, %s\n", inet_ntoa(addr), ntohs(udphdr->dst_port), (char *)(udphdr+1));
